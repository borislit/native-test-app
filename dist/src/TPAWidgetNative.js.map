{"version":3,"sources":["TPAWidgetNative.js"],"names":["TPAWidgetNative","props","state","comp","overrides","_","get","width","alignment","marginLeft","defaults","dimensions","compName","isEditor","viewMode","createNativeAppComponent","getCompName","setState","mapValues","compActions","argsArray","handleAction","eventInfo","payload","JSON","stringify","Comp","compProps","wixCodeProps","compData","eventHandlers","getEventHandlers","style","id","resizeComponent","deviceType","isViewerMode","styleId","pick","wrapperStyle","getStyle","mobxObserverWrapperProps","compCss","getCss","React","Component","displayName","propTypes","santaTypeDefinitions","NativeComponentSantaTypes","widgetStyle","Behaviors","defaultContentArea","Container","getStyleData"],"mappings":"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","file":"TPAWidgetNative.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport {santaTypeDefinitions} from 'santa-components/dist/santa-components-infra.prod.js'\nexport class TPAWidgetNative extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            comp: null\n        }\n    }\n\n    static displayName = \"TPAWidgetNative\";\n\n\n    static propTypes = {\n        style: santaTypeDefinitions.NativeComponentSantaTypes.widgetStyle,\n        styleId: santaTypeDefinitions.Component.styleId,\n        dimensions: santaTypeDefinitions.Component.style,\n        compActions: santaTypeDefinitions.Component.compActions,\n        compData: santaTypeDefinitions.Component.compData,\n        handleAction: santaTypeDefinitions.Behaviors.handleAction,\n        deviceType: santaTypeDefinitions.NativeComponentSantaTypes.deviceType,\n        viewMode: santaTypeDefinitions.NativeComponentSantaTypes.viewMode,\n        defaultContentArea: santaTypeDefinitions.Container.defaultContentArea,\n        createNativeAppComponent: santaTypeDefinitions.NativeComponentSantaTypes.createNativeAppComponent,\n        getStyleData: santaTypeDefinitions.Component.getStyleData\n    };\n\n    getStyle(overrides) {\n        const {width, alignment} = _.get(this.props, 'defaultContentArea', { width: 980, alignment: 0.5});\n        const marginLeft = {marginLeft: `calc((100% - ${width}px) * ${alignment})`};\n        return _.defaults(this.props.dimensions, marginLeft, overrides);\n    }\n\n    getCompName(compName) {\n        return this.isEditor() ? compName + \"-Editor\" : compName;\n    }\n\n    isEditor() {\n        return this.props.viewMode === \"editor\";\n    }\n\n    componentDidMount() {\n        this.props.createNativeAppComponent(this.getCompName(\"NativeApp\"), this.props, comp => {\n            this.setState({comp})\n        });\n        // this.props.appLoadBI && this.props.appLoadBI.loaded();\n    }\n\n    getEventHandlers() {\n        return _.mapValues(this.props.compActions, eventInfo => (...argsArray) => this.props.handleAction(eventInfo, {payload: JSON.stringify(argsArray)}));\n    }\n\n    // getCompCss(styleId, styleProps) {\n    //     const data = styleProps.getStyleData(styleId);\n    //     if (!_.isFunction(_.get(this.state,'comp.getCompCss'))) {\n    //         return null;\n    //     }\n    //     return this.state.comp.getCss(styleId, data);\n    // }\n\n\n    render() {\n        const Comp = _.get(this.state,'comp.type');\n        if (!Comp) {\n            return <div/>\n        }\n        const compProps = this.state.comp.props;\n        const wixCodeProps = compProps.compData.wixCodeProps;\n        const eventHandlers = this.getEventHandlers();\n        const {style, id, resizeComponent, deviceType, viewMode, isViewerMode, styleId} = this.props;\n        const dimensions = _.pick(this.props.dimensions, ['width', 'height', 'left', 'top']);\n        const wrapperStyle = this.getStyle();\n        const mobxObserverWrapperProps = _.get(this.props,'computedParentDimensions.scope.props.mobxObserverWrapperProps');\n        const props = {\n            ...wixCodeProps,\n            ...eventHandlers,\n            id,\n            style,\n            resizeComponent,\n            deviceType,\n            viewMode,\n            dimensions,\n            isViewerMode,\n            mobxObserverWrapperProps,\n            styleId\n        };\n\n        const compCss = Comp.getCss(style);\n\n        return (\n            <div style={wrapperStyle}>\n                <Comp {...props}/>\n                <style>{compCss}</style>\n            </div>\n        )\n    }\n}\n\n// const cssTypes = {\n//     getStyleData: santaTypeDefinitions.Component.getStyleData\n// };\n//\n// TPAWidgetNative.getCompCss = TPAWidgetNative.prototype.getCompCss;\n// TPAWidgetNative.getCompCss.cssTypes = cssTypes;"]}